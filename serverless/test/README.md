TODO: full stack tests. fire up the functions container, use the api from our generated client libs. 

